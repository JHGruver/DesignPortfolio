<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Jacob Gruver - Resume & CV">
    <title>Resume | Jacob Gruver</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Theme Detection -->
    <script>
        (function() {
            try {
                const savedTheme = localStorage.getItem('preferredTheme');
                if (savedTheme) {
                    document.documentElement.className = savedTheme;
                } else {
                    document.documentElement.className = 'theme-mentor';
                }
            } catch (e) {
                document.documentElement.className = 'theme-mentor';
            }
        })();
    </script>

    <link rel="stylesheet" href="style.css">
</head>
<body class="resume-body">

    <!-- Resume Viewer -->
    <div class="resume-viewer">
        <!-- Back Button (aligned with left arrow) -->
        <a href="index.html" class="resume-back-btn">← Back to Portfolio</a>

        <!-- Left Arrow -->
        <button class="resume-nav-btn resume-prev" id="prevBtn">‹</button>

        <!-- Pages -->
        <div class="resume-pages-wrapper">
            <div class="resume-pages" id="resumePages">
                <img src="images/resume/Jacob_Gruver_Resume_2026-1.jpg" alt="Page 1 - Summary and Key Achievements" class="resume-page-img">
                <img src="images/resume/Jacob_Gruver_Resume_2026-2.jpg" alt="Page 2 - Professional Experience" class="resume-page-img">
                <img src="images/resume/Jacob_Gruver_Resume_2026-3.jpg" alt="Page 3 - Skills and Education" class="resume-page-img">
            </div>
        </div>

        <!-- Right Arrow -->
        <button class="resume-nav-btn resume-next" id="nextBtn">›</button>

        <!-- Download Button (aligned with right arrow) -->
        <a href="Jacob_Gruver_Resume_2026.docx" download class="resume-download-btn">Download ⬇</a>
    </div>

    <!-- Controls -->
    <div class="resume-controls">
        <div class="resume-dots" id="dots">
            <span class="dot active" data-index="0"></span>
            <span class="dot" data-index="1"></span>
            <span class="dot" data-index="2"></span>
        </div>
        <p class="resume-counter" id="counter">Pages 1-2 of 3</p>
    </div>

    <!-- Magnifying Glass -->
    <div class="magnifier" id="magnifier"></div>

    <script>
        // Simple two-page carousel
        let currentIndex = 0;
        const totalPages = 3;
        const pagesContainer = document.getElementById('resumePages');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const dots = document.querySelectorAll('.dot');
        const counter = document.getElementById('counter');

        function updateView() {
            // Move the container to show current pair of pages
            const offset = -(currentIndex * 50); // 50% per page
            pagesContainer.style.transform = `translateX(${offset}%)`;

            // Update dots - highlight current and next page
            dots.forEach((dot, i) => {
                if (i === currentIndex || i === currentIndex + 1) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });

            // Update counter
            const firstPage = currentIndex + 1;
            const secondPage = Math.min(currentIndex + 2, totalPages);
            counter.textContent = `Pages ${firstPage}-${secondPage} of ${totalPages}`;

            // Update button states
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex >= totalPages - 2;
        }

        // Navigation
        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateView();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentIndex < totalPages - 2) {
                currentIndex++;
                updateView();
            }
        });

        // Dot clicks
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                // If clicking last page, show pages 4-5
                if (index === totalPages - 1) {
                    currentIndex = totalPages - 2;
                } else {
                    currentIndex = index;
                }
                updateView();
            });
        });

        // Keyboard
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && currentIndex > 0) {
                currentIndex--;
                updateView();
            } else if (e.key === 'ArrowRight' && currentIndex < totalPages - 2) {
                currentIndex++;
                updateView();
            }
        });

        // Initialize
        updateView();

        // ===== Magnifying Glass (Desktop only) =====
        const magnifier = document.getElementById('magnifier');
        const resumeImages = document.querySelectorAll('.resume-page-img');

        // Detect touch device - disable magnifier, allow native pinch-to-zoom
        const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

        if (!isTouchDevice) {
            const magnificationLevel = 2.5;
            const magnifierSize = 300;

            magnifier.style.width = magnifierSize + 'px';
            magnifier.style.height = magnifierSize + 'px';

            resumeImages.forEach(img => {
                img.addEventListener('mouseenter', () => {
                    magnifier.style.display = 'block';
                });

                img.addEventListener('mouseleave', () => {
                    magnifier.style.display = 'none';
                });

                img.addEventListener('mousemove', (e) => {
                    const rect = img.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    magnifier.style.left = (e.clientX - magnifierSize / 2) + 'px';
                    magnifier.style.top = (e.clientY - magnifierSize / 2) + 'px';

                    const bgPosX = -(x * magnificationLevel - magnifierSize / 2);
                    const bgPosY = -(y * magnificationLevel - magnifierSize / 2);

                    magnifier.style.backgroundImage = `url('${img.src}')`;
                    magnifier.style.backgroundSize = `${rect.width * magnificationLevel}px ${rect.height * magnificationLevel}px`;
                    magnifier.style.backgroundPosition = `${bgPosX}px ${bgPosY}px`;
                });
            });
        } else {
            // Hide magnifier on touch devices
            magnifier.style.display = 'none';
            // Remove crosshair cursor on touch
            resumeImages.forEach(img => {
                img.style.cursor = 'default';
            });
        }
    </script>
</body>
</html>
